--表头
function npctop1()
  Hero:ActFun(101,"&&<0_江湖中会留下怎样的传说呢？>",0)
end

--功能选项
function npcmid10()
  Hero:ActFun(102,"[1]认识更多朋友 2063001",0)
  Hero:ActFun(102,"[1]获得更好的宠物 2063002",0)
  Hero:ActFun(102,"[1]获得更好的装备 2063003",0)
end

function npcmid30012()
  Hero:ActFun(102,"[22]拜访狄青 2063004",0)
end

function npcmid30020()
  Hero:ActFun(102,"[44]结交好友 2063005",0)
end

function npcmid30021()
  Hero:ActFun(102,"[3]结交好友 2063006",0)
end

function npcmid30022()
  Hero:ActFun(102,"[22]结交好友 2063005",0)
end

function npcmid30030()
  Hero:ActFun(102,"[44]结交更多好友 2063007",0)
end

function npcmid30031()
  Hero:ActFun(102,"[3]结交更多好友 2063008",0)
end

function npcmid30032()
  Hero:ActFun(102,"[22]结交更多好友 2063007",0)
end

function npcmid31012()
  Hero:ActFun(102,"[22]再访狄青 2063009",0)
end

function npcmid31020()
  Hero:ActFun(102,"[44]获得更好的宠物 2063010",0)
end

function npcmid31021()
  Hero:ActFun(102,"[3]获得更好的宠物 2063011",0)
end

function npcmid31022()
  Hero:ActFun(102,"[22]获得更好的宠物 2063010",0)
end

function npcmid27010()
  Hero:ActFun(102,"[44]大侠之路 2063012",0)
end

function npcmid27011()
  Hero:ActFun(102,"[3]大侠之路 2063013",0)
end

function npcmid27012()
  Hero:ActFun(102,"[22]大侠之路 2063012",0)
end

function npcmid27020()
  Hero:ActFun(102,"[44]拜访紫珠 2063014",0)
end

function npcmid27021()
  Hero:ActFun(102,"[3]拜访紫珠 2063015",0)
end

function npcmid27022()
  Hero:ActFun(102,"[22]拜访紫珠 2063014",0)
end

function npcmid32010()
  Hero:ActFun(102,"[44]第一把神器 2063016",0)
end

function npcmid32011()
  Hero:ActFun(102,"[3]第一把神器 2063017",0)
end

function npcmid32012()
  Hero:ActFun(102,"[22]第一把神器 2063016",0)
end

function npcmid33010()
  Hero:ActFun(102,"[44]大侠之路 2063018",0)
end

function npcmid33011()
  Hero:ActFun(102,"[3]大侠之路 2063019",0)
end

function npcmid33012()
  Hero:ActFun(102,"[22]大侠之路 2063018",0)
end





function npcmid39010()
  Hero:ActFun(102,"[44]许愿祝福 2063020",0)
end

function npcmid39011()
  Hero:ActFun(102,"[3]许愿祝福 2063021",0)
end

function npcmid39012()
  Hero:ActFun(102,"[22]许愿祝福 2063020",0)
end


function npcmid39020()
  Hero:ActFun(102,"[44]拜访梦缘天使 2063022",0)
end

function npcmid39021()
  Hero:ActFun(102,"[3]拜访梦缘天使 2063023",0)
end

function npcmid39022()
  Hero:ActFun(102,"[22]拜访梦缘天使 2063022",0)
end


function npcmid4001()
  Hero:ActFun(102,"[44]狄青急书 2063024",0)
end

function npcmid4002()
  Hero:ActFun(102,"[3]狄青急书 2063025",0)
end

function npcmid4003()
  Hero:ActFun(102,"[22]狄青急书 2063024",0)
end


function npcmid4011()
  Hero:ActFun(102,"[44]初识魂魄 2063026",0)
end

function npcmid4012()
  Hero:ActFun(102,"[3]初识魂魄 2063027",0)
end

function npcmid4013()
  Hero:ActFun(102,"[22]初识魂魄 2063026",0)
end


function npcmid3028()
  Hero:ActFun(102,"[22]绒兔心结(2) 2063028",0)
end

function npcmid3029()
  Hero:ActFun(102,"[44]勇者无敌 2063029",0)
end

function npcmid3030()
  Hero:ActFun(102,"[3]勇者无敌 2063030",0)
end

function npcmid3031()
  Hero:ActFun(102,"[22]勇者无敌 2063031",0)
end
function npcmid3032()
  Hero:ActFun(102,"[5]绝归岛 2063032",0)
end

function npcmid3033()
  Hero:ActFun(102,"[5]小绝归岛 2063033",0)
end
--表尾
function npcTail()
  Hero:ActFun(103,"",0)
end

--转向选项
function npctask1()
  Hero:ActFun(101,"&&<0_江湖中认识更多的朋友，会让你的江湖旅途更加的多姿多彩！>",0)
  Hero:ActFun(103,"",0)
end

function npctask2()
  Hero:ActFun(101,"&&<0_在开封城的宠物林传送使阿九姑娘处可以传送到宠物林捕捉珍贵宠物！>",0)
  Hero:ActFun(103,"",0)
end

function npctask3()
  Hero:ActFun(101,"&&<0_在开封城的武器店老板、裁缝店老板和饰品店老板处可以对装备进行多种强化！>",0)
  Hero:ActFun(103,"",0)
end

function npctask4()
  Hero:ActFun(1046,"30 1",3)
end

function npctask5()
  Hero:ActFun(1046,"30 2",3)
end

function npctask6()
  Hero:ActFun(1046,"30 2",29)
end

function npctask7()
  Hero:ActFun(1046,"30 3",3)
end

function npctask8()
  Hero:ActFun(1046,"30 3",29)
end

function npctask9()
  Hero:ActFun(1046,"31 1",3)
end

function npctask10()
  Hero:ActFun(1046,"31 2",3)
end

function npctask11()
  Hero:ActFun(1046,"31 2",29)
end

function npctask12()
  Hero:ActFun(1046,"27 1",3)
end

function npctask13()
  Hero:ActFun(1046,"27 1",29)
end

function npctask14()
  Hero:ActFun(1046,"27 2",3)
end

function npctask15()
  Hero:ActFun(1046,"27 2",29)
end

function npctask16()
  Hero:ActFun(1046,"32 1",3)
end

function npctask17()
  Hero:ActFun(1046,"32 1",29)
end

function npctask18()
  Hero:ActFun(1046,"33 1",3)
end

function npctask19()
  Hero:ActFun(1046,"33 1",29)
end




function npctask20()
  Hero:ActFun(1046,"39 1",3)
end

function npctask21()
  Hero:ActFun(1046,"39 1",29)
end

function npctask22()
  Hero:ActFun(1046,"39 2",3)
end

function npctask23()
  Hero:ActFun(1046,"39 2",29)
end

function npctask24()
  Hero:ActFun(1046,"40 1",3)
end

function npctask25()
  Hero:ActFun(1046,"40 1",29)
end

function npctask26()
  Hero:ActFun(1046,"40 2",3)
end
function npctask27()
  Hero:ActFun(1046,"40 2",29)
end


function npctask28()
  Hero:ActFun(1046,"41 6",3)
end

function npctask29()
  Hero:ActFun(1046,"41 7",3)
end

function npctask30()
  Hero:ActFun(1046,"41 7",29)
end

function npctask31()
  Hero:ActFun(1046,"41 7",3)
end
function npctask32()
 if(Hero:ActFun(1116,"",10055) == true)then  --判断队伍中是否全部人等级大于等于60
    if(Hero:ActFun(1102,"count > 2",0) == true)then  --判断队伍人数是否大于2人
	     if(Hero:ActFun(1116,"",10056) == true)then  --判断队伍中是否全部进入副本的次数小于2
		    if(Hero:ActFun(1102,"active 0 0",0) == true)then --判断队友是否在附近
				  if(Hero:ActFun(1102,"teamlead 0 0",0) == true)then  --判断是不是队长
				       Hero:ActFun(1118,"",40019)  --进入副本
				  else
				  Hero:ActFun(127,"你不是队长",0)
			      end
			else
			Hero:ActFun(127,"有队友不在附近",0)
		    end
		else
	        Hero:ActFun(127,"你已经今天已经进入过2次副本了，明天再来吧",0)
		     Hero:ActFun(1118,"",40020) --检查不满足条件的玩家
		end
	else
		Hero:ActFun(127,"60级3人以上组队才能够参加绝归岛活动",0)
       --Hero:ActFun(1118,"",40020)
	end
	else
		Hero:ActFun(127,"60级3人以上组队才能够参加绝归岛活动",0)
        Hero:ActFun(1118,"",40020)
	end
end

function npctask33()
 if(Hero:ActFun(1116,"",10055) == true)then  --判断队伍中是否全部人等级大于等于60
    if(Hero:ActFun(1102,"count > 2",0) == true)then  --判断队伍人数是否大于2人
	     if(Hero:ActFun(1116,"",10057) == true)then  --判断队伍中是否全部进入副本的次数小于2
		    if(Hero:ActFun(1102,"active 0 0",0) == true)then --判断队友是否在附近
				  if(Hero:ActFun(1102,"teamlead 0 0",0) == true)then  --判断是不是队长
				       Hero:ActFun(1118,"",40023)  --进入副本
				  else
				  Hero:ActFun(127,"你不是队长",0)
			      end
			else
			Hero:ActFun(127,"有队友不在附近",0)
		    end
		else
	        Hero:ActFun(127,"你已经今天已经进入过1次副本了，明天再来吧",0)
		     Hero:ActFun(1118,"",40022) --检查不满足条件的玩家
		end
	else
		Hero:ActFun(127,"60级3人以上组队才能够参加绝归岛活动",0)
       --Hero:ActFun(1118,"",40022)
	end
	else
		Hero:ActFun(127,"60级3人以上组队才能够参加绝归岛活动",0)
        Hero:ActFun(1118,"",40022)
	end
end

--显示选项
if(gContext==2063000)then
--显示表头
npctop1()

npcmid3032() --副本
npcmid3033() --副本
--任务结构链开始
if(Hero:ActFun(1001,"level >= 20",0) == true)then
  if(Hero:ActFun(1080,"mask == 27",27) == false)then			--天掩码判断
  if(Hero:ActFun(1080,"task has 0",27) == true)then				--任务链判断


    --任务步骤结构开始 2701
    if(Hero:ActFun(1080,"step == 1",27) == true)then			--任务步骤判断
      if(Hero:ActFun(1080,"task state 3",27) == true)then				--任务状态判断，是否可完成
        npcmid27012()
      end
    end

    --任务步骤结构开始 2702
    if(Hero:ActFun(1080,"step == 2",27) == true)then
      if(Hero:ActFun(1080,"task state 0",27) == true)then
        npcmid27020()
      elseif(Hero:ActFun(1080,"task state 3",27) == true)then
        --npcmid27022()
      elseif(Hero:ActFun(1080,"task state 1",27) == true)then
        npcmid27021()
      end
    end

  end
  end
end


--任务结构链开始
if(Hero:ActFun(1001,"level >= 15",0) == true)then
  if(Hero:ActFun(1080,"mask == 30",30) == false)then			--天掩码判断
  if(Hero:ActFun(1080,"task has 0",30) == true)then				--任务链判断


    --任务步骤结构开始 3001
    if(Hero:ActFun(1080,"step == 1",30) == true)then			--任务步骤判断
      if(Hero:ActFun(1080,"task state 3",30) == true)then				--任务状态判断，是否可完成
        npcmid30012()
      end
    end

    --任务步骤结构开始 3002
    if(Hero:ActFun(1080,"step == 2",30) == true)then
      if(Hero:ActFun(1080,"task state 0",30) == true)then
        npcmid30020()
      elseif(Hero:ActFun(1080,"task state 3",30) == true)then
        npcmid30022()
      elseif(Hero:ActFun(1080,"task state 1",30) == true)then
        npcmid30021()
      end
    end

  end
  end
end

--任务结构链开始
if(Hero:ActFun(1001,"level >= 16",0) == true)then
  if(Hero:ActFun(1080,"mask == 31",31) == false)then			--天掩码判断
  if(Hero:ActFun(1080,"task has 0",31) == true)then				--任务链判断


    --任务步骤结构开始 3101
    if(Hero:ActFun(1080,"step == 1",31) == true)then			--任务步骤判断
      if(Hero:ActFun(1080,"task state 3",31) == true)then				--任务状态判断，是否可完成
        npcmid31012()
      end
    end

    --任务步骤结构开始 3102
    if(Hero:ActFun(1080,"step == 2",31) == true)then
      if(Hero:ActFun(1080,"task state 0",31) == true)then
        npcmid31020()
      elseif(Hero:ActFun(1080,"task state 3",31) == true)then
        --npcmid31022()
      elseif(Hero:ActFun(1080,"task state 1",31) == true)then
        npcmid31021()
      end
    end
  end
  end
end

if(Hero:ActFun(1001,"level >= 20",0) == true)then
  if(Hero:ActFun(1080,"mask == 32",32) == false)then			--天掩码判断
  if(Hero:ActFun(1080,"task has 0",32) == true)then				--任务链判断

    --任务步骤结构开始 3201
    if(Hero:ActFun(1080,"step == 1",32) == true)then
      if(Hero:ActFun(1080,"task state 0",32) == true)then
        npcmid32010()
      elseif(Hero:ActFun(1080,"task state 3",32) == true)then
        npcmid32012()
      elseif(Hero:ActFun(1080,"task state 1",32) == true)then
        npcmid32011()
      end
    end
    else
  	npcmid32010()
  end
  end
end

if(Hero:ActFun(1001,"level >= 20",0) == true)then
  if(Hero:ActFun(1080,"mask == 33",33) == false)then			--天掩码判断
  if(Hero:ActFun(1080,"task has 0",33) == true)then				--任务链判断

    --任务步骤结构开始 3301
    if(Hero:ActFun(1080,"step == 1",33) == true)then
      if(Hero:ActFun(1080,"task state 0",33) == true)then
        npcmid33010()
      elseif(Hero:ActFun(1080,"task state 3",33) == true)then
        npcmid33012()
      elseif(Hero:ActFun(1080,"task state 1",33) == true)then
        npcmid33011()
      end
    end
  else
  	npcmid33010()
  end
  end
end






--任务结构链开始
if(Hero:ActFun(1001,"level >= 25",0) == true)then
  if(Hero:ActFun(1080,"mask == 40",39) == false)then			--天掩码判断
  if(Hero:ActFun(1080,"task has 0",39) == true)then				--任务链判断
    --任务步骤结构开始 3901
    if(Hero:ActFun(1080,"step == 1",39) == true)then
      if(Hero:ActFun(1080,"task state 0",39) == true)then
        npcmid39010()
      elseif(Hero:ActFun(1080,"task state 3",39) == true)then
        npcmid39012()
      elseif(Hero:ActFun(1080,"task state 1",39) == true)then
        npcmid39011()
      end
    end
    --任务步骤结构开始 3902
    if(Hero:ActFun(1080,"step == 2",39) == true)then
      if(Hero:ActFun(1080,"task state 0",39) == true)then
        npcmid39020()
      elseif(Hero:ActFun(1080,"task state 3",39) == true)then
        --npcmid39022()
      elseif(Hero:ActFun(1080,"task state 1",39) == true)then
        npcmid39021()
      end
    end
  else
     npcmid39010()
  end
  end
end

--npcmid4002()
--任务结构链开始
if(Hero:ActFun(1001,"level >= 40",0) == true)then
  if(Hero:ActFun(1080,"mask == 44",40) == false)then       --天掩码判断
  if(Hero:ActFun(1080,"task has 0",40) == true)then				--任务链判断
    --任务步骤结构开始 4001
    if(Hero:ActFun(1080,"step == 1",40) == true)then
      if(Hero:ActFun(1080,"task state 0",40) == true)then
        npcmid4001()
      elseif(Hero:ActFun(1080,"task state 3",40) == true)then
        npcmid4003()
      elseif(Hero:ActFun(1080,"task state 1",40) == true)then
        npcmid4002()
      end
    end
    --任务步骤结构开始 4002
    if(Hero:ActFun(1080,"step == 2",40) == true)then
      if(Hero:ActFun(1080,"task state 0",40) == true)then
        npcmid4011()
      elseif(Hero:ActFun(1080,"task state 3",40) == true)then
        --npcmid4013()
      elseif(Hero:ActFun(1080,"task state 1",40) == true)then
        npcmid4012()
      end
    end
  else
     npcmid4001()

  end
 end
end


--任务结构链开始4106
  if(Hero:ActFun(1080,"daymask == 45",41) == false)then
  if(Hero:ActFun(1080,"task has 0",41) == true)then

   if(Hero:ActFun(1080,"step == 6",41) == true)then
      if(Hero:ActFun(1080,"task state 0",41) == true)then
	  elseif(Hero:ActFun(1080,"task state 2",41) == true)then
      elseif(Hero:ActFun(1080,"task state 3",41) == true)then
        npcmid3028()
      end
    end
  end
  end

   --任务步骤结构开始 4107
    if(Hero:ActFun(1080,"step == 7",41) == true)then
      if(Hero:ActFun(1080,"task state 0",41) == true)then
        npcmid3029()
        elseif(Hero:ActFun(1080,"task state 2",41) == true)then
      elseif(Hero:ActFun(1080,"task state 3",41) == true)then
        npcmid3031()
      elseif(Hero:ActFun(1080,"task state 1",41) == true)then
        npcmid3030()
      end
    end
--npcmid10()
 --显示表尾
npcTail()

elseif(gContext==2063001)then
 npctask1()
elseif(gContext==2063002)then
 npctask2()
elseif(gContext==2063003)then
 npctask3()
elseif(gContext==2063004)then
 npctask4()
elseif(gContext==2063005)then
 npctask5()
elseif(gContext==2063006)then
 npctask6()
elseif(gContext==2063007)then
 npctask7()
elseif(gContext==2063008)then
 npctask8()
elseif(gContext==2063009)then
 npctask9()
elseif(gContext==2063010)then
 npctask10()
elseif(gContext==2063011)then
 npctask11()
elseif(gContext==2063012)then
 npctask12()
elseif(gContext==2063013)then
 npctask13()
elseif(gContext==2063014)then
 npctask14()
elseif(gContext==2063015)then
 npctask15()
elseif(gContext==2063016)then
 npctask16()
elseif(gContext==2063017)then
 npctask17()
elseif(gContext==2063018)then
 npctask18()
elseif(gContext==2063019)then
 npctask19()

elseif(gContext==2063020)then
 npctask20()
elseif(gContext==2063021)then
 npctask21()
elseif(gContext==2063022)then
 npctask22()
elseif(gContext==2063023)then
 npctask23()

elseif(gContext==2063024)then
 npctask24()
elseif(gContext==2063025)then
 npctask25()
elseif(gContext==2063026)then
 npctask26()
elseif(gContext==2063027)then
 npctask27()

elseif(gContext==2063028)then
 npctask28()
elseif(gContext==2063029)then
 npctask29()
elseif(gContext==2063030)then
 npctask30()
elseif(gContext==2063031)then
 npctask31()
elseif(gContext==2063032)then
 npctask32()
 elseif(gContext==2063033)then
 npctask33()
end

