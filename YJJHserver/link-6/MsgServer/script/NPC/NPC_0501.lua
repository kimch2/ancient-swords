--NPC:叶孤心

--表头
function npctop1()
  Hero:ActFun(101,"&&<0_什么江湖不江湖，普天之下，莫非王土，率土之滨，莫非王臣。没有什么江湖规矩，武林道义，只有王法。>",0)
end

--任务 0412
function npcmid04120()
  Hero:ActFun(102,"[44]迟暮钟声（2） 2050101",0)
end

function npcmid04121()
  Hero:ActFun(102,"[3]迟暮钟声（2） 2050102",0)
end

function npcmid04122()
  Hero:ActFun(102,"[22]迟暮钟声（2） 2050101",0)
end

--任务 0501
function npcmid05010()
  Hero:ActFun(102,"[44]你是谁？ 2050103",0)
end

function npcmid05011()
  Hero:ActFun(102,"[3]你是谁？ 2050104",0)
end

function npcmid05012()
  Hero:ActFun(102,"[22]你是谁？ 2050103",0)
end

--任务 0502
function npcmid05020()
  Hero:ActFun(102,"[44]风云门 2050105",0)
end

function npcmid05021()
  Hero:ActFun(102,"[3]风云门 2050106",0)
end

function npcmid05022()
  Hero:ActFun(102,"[22]风云门 2050105",0)
end

--任务 0503
function npcmid05030()
  Hero:ActFun(102,"[44]万里长风 2050107",0)
end

function npcmid05031()
  Hero:ActFun(102,"[3]万里长风 2050108",0)
end

function npcmid05032()
  Hero:ActFun(102,"[22]万里长风 2050107",0)
end

--任务 0504
function npcmid05040()
  Hero:ActFun(102,"[44]万里长风（1） 2050109",0)
end

function npcmid05041()
  Hero:ActFun(102,"[3]万里长风（1） 2050110",0)
end

function npcmid05042()
  Hero:ActFun(102,"[22]万里长风（1） 2050109",0)
end

--任务 0505
function npcmid05050()
  Hero:ActFun(102,"[44]疑心重重 2050111",0)
end

function npcmid05051()
  Hero:ActFun(102,"[3]疑心重重 2050112",0)
end

function npcmid05052()
  Hero:ActFun(102,"[22]疑心重重 2050111",0)
end

--任务 0506
function npcmid05060()
  Hero:ActFun(102,"[44]疑心重重（1） 2050113",0)
end

function npcmid05061()
  Hero:ActFun(102,"[3]疑心重重（1） 2050114",0)
end

function npcmid05062()
  Hero:ActFun(102,"[22]疑心重重（1） 2050113",0)
end

--任务 0507
function npcmid05070()
  Hero:ActFun(102,"[44]疑心重重（2） 2050115",0)
end

function npcmid05071()
  Hero:ActFun(102,"[3]疑心重重（2） 2050116",0)
end

function npcmid05072()
  Hero:ActFun(102,"[22]疑心重重（2） 2050115",0)
end

--任务 0509
function npcmid05090()
  Hero:ActFun(102,"[44]无罪之有（1） 2050117",0)
end

function npcmid05091()
  Hero:ActFun(102,"[3]无罪之有（1） 2050118",0)
end

function npcmid05092()
  Hero:ActFun(102,"[22]无罪之有（1） 2050117",0)
end

--任务 0510
function npcmid05100()
  Hero:ActFun(102,"[44]风云再起 2050119",0)
end

function npcmid05101()
  Hero:ActFun(102,"[3]风云再起 2050120",0)
end

function npcmid05102()
  Hero:ActFun(102,"[22]风云再起 2050119",0)
end

--任务 0515
function npcmid05150()
  Hero:ActFun(102,"[44]风云变动（1） 2050121",0)
end

function npcmid05151()
  Hero:ActFun(102,"[3]风云变动（1） 2050122",0)
end

function npcmid05152()
  Hero:ActFun(102,"[22]风云变动（1） 2050121",0)
end

--任务 0516
function npcmid05160()
  Hero:ActFun(102,"[44]旗亭酒肆 2050123",0)
end

function npcmid05161()
  Hero:ActFun(102,"[3]旗亭酒肆 2050124",0)
end

function npcmid05162()
  Hero:ActFun(102,"[22]旗亭酒肆 2050123",0)
end

--任务 0519
function npcmid05190()
  Hero:ActFun(102,"[44]怀璧其罪（1） 2050125",0)
end

function npcmid05191()
  Hero:ActFun(102,"[3]怀璧其罪（1） 2050126",0)
end

function npcmid05192()
  Hero:ActFun(102,"[22]怀璧其罪（1） 2050125",0)
end

--任务 0520
function npcmid05200()
  Hero:ActFun(102,"[44]赎罪 2050127",0)
end

function npcmid05201()
  Hero:ActFun(102,"[3]赎罪 2050128",0)
end

function npcmid05202()
  Hero:ActFun(102,"[22]赎罪 2050127",0)
end


--转向选项 0412
function npctask1()
  Hero:ActFun(1046,"4 12",3)
end

function npctask2()
  Hero:ActFun(1046,"4 12",29)
end

--转向选项 0501
function npctask3()
  Hero:ActFun(1046,"5 1",3)
end

function npctask4()
  Hero:ActFun(1046,"5 1",29)
end

--转向选项 0502
function npctask5()
  Hero:ActFun(1046,"5 2",3)
end

function npctask6()
  Hero:ActFun(1046,"5 2",29)
end

--转向选项 0503
function npctask7()
  Hero:ActFun(1046,"5 3",3)
end

function npctask8()
  Hero:ActFun(1046,"5 3",29)
end

--转向选项 0504
function npctask9()
  Hero:ActFun(1046,"5 4",3)
end

function npctask10()
  Hero:ActFun(1046,"5 4",29)
end

--转向选项 0505
function npctask11()
  Hero:ActFun(1046,"5 5",3)
end

function npctask12()
  Hero:ActFun(1046,"5 5",29)
end

--转向选项 0506
function npctask13()
  Hero:ActFun(1046,"5 6",3)
end

function npctask14()
  Hero:ActFun(1046,"5 6",29)
end

--转向选项 0507
function npctask15()
  Hero:ActFun(1046,"5 7",3)
end

function npctask16()
  Hero:ActFun(1046,"5 7",29)
end

--转向选项 0509
function npctask17()
  Hero:ActFun(1046,"5 9",3)
end

function npctask18()
  Hero:ActFun(1046,"5 9",29)
end

--转向选项 0510
function npctask19()
  Hero:ActFun(1046,"5 10",3)
end

function npctask20()
  Hero:ActFun(1046,"5 10",29)
end

--转向选项 0515
function npctask21()
  Hero:ActFun(1046,"5 15",3)
end

function npctask22()
  Hero:ActFun(1046,"5 15",29)
end

--转向选项 0516
function npctask23()
  Hero:ActFun(1046,"5 16",3)
end

function npctask24()
  Hero:ActFun(1046,"5 16",29)
end

--转向选项 0519
function npctask25()
  Hero:ActFun(1046,"5 19",3)
end

function npctask26()
  Hero:ActFun(1046,"5 19",29)
end

--转向选项 0520
function npctask27()
  Hero:ActFun(1046,"5 20",3)
end

function npctask28()
  Hero:ActFun(1046,"5 20",29)
end


--表尾函数
function npcTail()
  Hero:ActFun(103,"",0)
end


--显示选项
if(gContext==2050100)then
--显示表头
npctop1()


  --任务结构链开始
  if(Hero:ActFun(1001,"level >= 15",0) == true)then
  if(Hero:ActFun(1080,"mask == 4",4) == false)then
  if(Hero:ActFun(1080,"task has 0",4) == true)then


    --任务步骤结构开始 0412
    if(Hero:ActFun(1080,"step == 12",4) == true)then
      if(Hero:ActFun(1080,"task state 0",4) == true)then
        --npcmid04120()
        elseif(Hero:ActFun(1080,"task state 2",4) == true)then
      elseif(Hero:ActFun(1080,"task state 3",4) == true)then
        npcmid04122()
      elseif(Hero:ActFun(1080,"task state 1",4) == true)then
        --npcmid04121()
      end
    end
    end
  end
end


  --任务结构链开始
  if(Hero:ActFun(1001,"level >= 20",0) == true)then
  if(Hero:ActFun(1080,"mask == 5",5) == false)then
  if(Hero:ActFun(1080,"task has 0",5) == true)then


    --任务步骤结构开始 0501
    if(Hero:ActFun(1080,"step == 1",5) == true)then
      if(Hero:ActFun(1080,"task state 0",5) == true)then
        npcmid05010()
        elseif(Hero:ActFun(1080,"task state 2",5) == true)then
      elseif(Hero:ActFun(1080,"task state 3",5) == true)then
        npcmid05012()
      elseif(Hero:ActFun(1080,"task state 1",5) == true)then
        npcmid05011()
      end
    end

    --任务步骤结构开始 0502
    if(Hero:ActFun(1080,"step == 2",5) == true)then
      if(Hero:ActFun(1080,"task state 0",5) == true)then
        npcmid05020()
        elseif(Hero:ActFun(1080,"task state 2",5) == true)then
      elseif(Hero:ActFun(1080,"task state 3",5) == true)then
        npcmid05022()
      elseif(Hero:ActFun(1080,"task state 1",5) == true)then
        npcmid05021()
      end
    end

    --任务步骤结构开始 0503
    if(Hero:ActFun(1080,"step == 3",5) == true)then
      if(Hero:ActFun(1080,"task state 0",5) == true)then
        npcmid05030()
        elseif(Hero:ActFun(1080,"task state 2",5) == true)then
      elseif(Hero:ActFun(1080,"task state 3",5) == true)then
        --npcmid05032()
      elseif(Hero:ActFun(1080,"task state 1",5) == true)then
        npcmid05031()
      end
    end

    --任务步骤结构开始 0504
    if(Hero:ActFun(1080,"step == 4",5) == true)then
      if(Hero:ActFun(1080,"task state 0",5) == true)then
        --npcmid05040()
        elseif(Hero:ActFun(1080,"task state 2",5) == true)then
      elseif(Hero:ActFun(1080,"task state 3",5) == true)then
        npcmid05042()
      elseif(Hero:ActFun(1080,"task state 1",5) == true)then
        --npcmid05041()
      end
    end

    --任务步骤结构开始 0505
    if(Hero:ActFun(1080,"step == 5",5) == true)then
      if(Hero:ActFun(1080,"task state 0",5) == true)then
        npcmid05050()
        elseif(Hero:ActFun(1080,"task state 2",5) == true)then
      elseif(Hero:ActFun(1080,"task state 3",5) == true)then
        --npcmid05052()
      elseif(Hero:ActFun(1080,"task state 1",5) == true)then
        npcmid05051()
      end
    end

    --任务步骤结构开始 0506
    if(Hero:ActFun(1080,"step == 6",5) == true)then
      if(Hero:ActFun(1080,"task state 0",5) == true)then
        --npcmid05060()
        elseif(Hero:ActFun(1080,"task state 2",5) == true)then
      elseif(Hero:ActFun(1080,"task state 3",5) == true)then
        npcmid05062()
      elseif(Hero:ActFun(1080,"task state 1",5) == true)then
        --npcmid05061()
      end
    end

    --任务步骤结构开始 0507
    if(Hero:ActFun(1080,"step == 7",5) == true)then
      if(Hero:ActFun(1080,"task state 0",5) == true)then
        npcmid05070()
        elseif(Hero:ActFun(1080,"task state 2",5) == true)then
      elseif(Hero:ActFun(1080,"task state 3",5) == true)then
        --npcmid05072()
      elseif(Hero:ActFun(1080,"task state 1",5) == true)then
        npcmid05071()
      end
    end

    --任务步骤结构开始 0509
    if(Hero:ActFun(1080,"step == 9",5) == true)then
      if(Hero:ActFun(1080,"task state 0",5) == true)then
        --npcmid05090()
        elseif(Hero:ActFun(1080,"task state 2",5) == true)then
      elseif(Hero:ActFun(1080,"task state 3",5) == true)then
        npcmid05092()
      elseif(Hero:ActFun(1080,"task state 1",5) == true)then
        --npcmid05091()
      end
    end

    --任务步骤结构开始 0510
    if(Hero:ActFun(1080,"step == 10",5) == true)then
      if(Hero:ActFun(1080,"task state 0",5) == true)then
        npcmid05100()
        elseif(Hero:ActFun(1080,"task state 2",5) == true)then
      elseif(Hero:ActFun(1080,"task state 3",5) == true)then
        --npcmid05102()
      elseif(Hero:ActFun(1080,"task state 1",5) == true)then
        npcmid05101()
      end
    end

    --任务步骤结构开始 0515
    if(Hero:ActFun(1080,"step == 15",5) == true)then
      if(Hero:ActFun(1080,"task state 0",5) == true)then
        --npcmid05150()
        elseif(Hero:ActFun(1080,"task state 2",5) == true)then
      elseif(Hero:ActFun(1080,"task state 3",5) == true)then
        npcmid05152()
      elseif(Hero:ActFun(1080,"task state 1",5) == true)then
        --npcmid05151()
      end
    end

    --任务步骤结构开始 0516
    if(Hero:ActFun(1080,"step == 16",5) == true)then
      if(Hero:ActFun(1080,"task state 0",5) == true)then
        npcmid05160()
        elseif(Hero:ActFun(1080,"task state 2",5) == true)then
      elseif(Hero:ActFun(1080,"task state 3",5) == true)then
        --npcmid05162()
      elseif(Hero:ActFun(1080,"task state 1",5) == true)then
        npcmid05161()
      end
    end

    --任务步骤结构开始 0519
    if(Hero:ActFun(1080,"step == 19",5) == true)then
      if(Hero:ActFun(1080,"task state 0",5) == true)then
        --npcmid05190()
        elseif(Hero:ActFun(1080,"task state 2",5) == true)then
      elseif(Hero:ActFun(1080,"task state 3",5) == true)then
        npcmid05192()
      elseif(Hero:ActFun(1080,"task state 1",5) == true)then
        --npcmid05191()
      end
    end

    --任务步骤结构开始 0520
    if(Hero:ActFun(1080,"step == 20",5) == true)then
      if(Hero:ActFun(1080,"task state 0",5) == true)then
        npcmid05200()
        elseif(Hero:ActFun(1080,"task state 2",5) == true)then
      elseif(Hero:ActFun(1080,"task state 3",5) == true)then
        --npcmid05202()
      elseif(Hero:ActFun(1080,"task state 1",5) == true)then
        npcmid05201()
      end
    end
    else
      npcmid05010()
    end
  end
end


--显示表尾
npcTail()

elseif(gContext==2050101)then
  npctask1()
elseif(gContext==2050102)then
  npctask2()
elseif(gContext==2050103)then
  npctask3()
elseif(gContext==2050104)then
  npctask4()
elseif(gContext==2050105)then
  npctask5()
elseif(gContext==2050106)then
  npctask6()
elseif(gContext==2050107)then
  npctask7()
elseif(gContext==2050108)then
  npctask8()
elseif(gContext==2050109)then
  npctask9()
elseif(gContext==2050110)then
  npctask10()
elseif(gContext==2050111)then
  npctask11()
elseif(gContext==2050112)then
  npctask12()
elseif(gContext==2050113)then
  npctask13()
elseif(gContext==2050114)then
  npctask14()
elseif(gContext==2050115)then
  npctask15()
elseif(gContext==2050116)then
  npctask16()
elseif(gContext==2050117)then
  npctask17()
elseif(gContext==2050118)then
  npctask18()
elseif(gContext==2050119)then
  npctask19()
elseif(gContext==2050120)then
  npctask20()
elseif(gContext==2050121)then
  npctask21()
elseif(gContext==2050122)then
  npctask22()
elseif(gContext==2050123)then
  npctask23()
elseif(gContext==2050124)then
  npctask24()
elseif(gContext==2050125)then
  npctask25()
elseif(gContext==2050126)then
  npctask26()
elseif(gContext==2050127)then
  npctask27()
elseif(gContext==2050128)then
  npctask28()
end
