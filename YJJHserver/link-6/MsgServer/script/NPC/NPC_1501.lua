--表头	
function npctop1()  
  Hero:ActFun(101,"&&<0_人人都说楼兰女子花容月貌，在我看来，这身外之物，不要也罢。>",0)
end

--功能选项
--任务2117 
function npcmid021170()
  Hero:ActFun(102,"[44]楼兰魅影 2150101",0)  --接任务
end

function npcmid021171()
  Hero:ActFun(102,"[3]楼兰魅影 2150102",0)  --未完成
end

function npcmid021172()
  Hero:ActFun(102,"[22]楼兰魅影 2150101",0)  --交任务
end

--任务2201 
function npcmid022010()
  Hero:ActFun(102,"[44]消失的楼兰 2150103",0)  --接任务
end

function npcmid022011()
  Hero:ActFun(102,"[3]消失的楼兰 2150104",0)  --未完成
end

function npcmid022012()
  Hero:ActFun(102,"[22]消失的楼兰 2150103",0)  --交任务
end

--任务2202 
function npcmid022020()
  Hero:ActFun(102,"[44]逃离楼兰（1） 2150105",0)  --接任务
end

function npcmid022021()
  Hero:ActFun(102,"[3]逃离楼兰（1） 2150106",0)  --未完成
end

function npcmid022022()
  Hero:ActFun(102,"[22]逃离楼兰（1） 2150105",0)  --交任务
end

--任务2203 
function npcmid022030()
  Hero:ActFun(102,"[44]逃离楼兰（2） 2150107",0)  --接任务
end

function npcmid022031()
  Hero:ActFun(102,"[3]逃离楼兰（2） 2150108",0)  --未完成
end

function npcmid022032()
  Hero:ActFun(102,"[22]逃离楼兰（2） 2150107",0)  --交任务
end

--任务2206 
function npcmid022060()
  Hero:ActFun(102,"[44]失踪的公主（2） 2150109",0)  --接任务
end

function npcmid022061()
  Hero:ActFun(102,"[3]失踪的公主（2） 2150110",0)  --未完成
end

function npcmid022062()
  Hero:ActFun(102,"[22]失踪的公主（2） 2150109",0)  --交任务
end

--任务2207 
function npcmid022070()
  Hero:ActFun(102,"[44]失踪的公主（3） 2150111",0)  --接任务
end

function npcmid022071()
  Hero:ActFun(102,"[3]失踪的公主（3） 2150112",0)  --未完成
end

function npcmid022072()
  Hero:ActFun(102,"[22]失踪的公主（3） 2150111",0)  --交任务
end

--任务2214 
function npcmid022140()
  Hero:ActFun(102,"[44]亡灵咒杀（1） 2150113",0)  --接任务
end

function npcmid022141()
  Hero:ActFun(102,"[3]亡灵咒杀（1） 2150114",0)  --未完成
end

function npcmid022142()
  Hero:ActFun(102,"[22]亡灵咒杀（1） 2150113",0)  --交任务
end

--任务2215 
function npcmid022150()
  Hero:ActFun(102,"[44]亡灵咒杀（2） 2150115",0)  --接任务
end

function npcmid022151()
  Hero:ActFun(102,"[3]亡灵咒杀（2） 2150116",0)  --未完成
end

function npcmid022152()
  Hero:ActFun(102,"[22]亡灵咒杀（2） 2150115",0)  --交任务
end

--任务2217 
function npcmid022170()
  Hero:ActFun(102,"[44]亡灵咒杀（4） 2150117",0)  --接任务
end

function npcmid022171()
  Hero:ActFun(102,"[3]亡灵咒杀（4） 2150118",0)  --未完成
end

function npcmid022172()
  Hero:ActFun(102,"[22]亡灵咒杀（4） 2150117",0)  --交任务
end

--任务2218 
function npcmid022180()
  Hero:ActFun(102,"[44]魂断楼兰 2150119",0)  --接任务
end

function npcmid022181()
  Hero:ActFun(102,"[3]魂断楼兰 2150120",0)  --未完成
end

function npcmid022182()
  Hero:ActFun(102,"[22]魂断楼兰 2150119",0)  --交任务
end

--任务2219 
function npcmid022190()
  Hero:ActFun(102,"[44]忘川荒村 2150121",0)  --接任务
end

function npcmid022191()
  Hero:ActFun(102,"[3]忘川荒村 2150122",0)  --未完成
end

function npcmid022192()
  Hero:ActFun(102,"[22]忘川荒村 2150121",0)  --交任务
end


--转向选项 02117
function npctask1()
  Hero:ActFun(1046,"21 17",3)
end

function npctask2()
  Hero:ActFun(1046,"21 17",29)
end


--转向选项 02201
function npctask3()
  Hero:ActFun(1046,"22 1",3)
end

function npctask4()
  Hero:ActFun(1046,"22 1",29)
end

--转向选项 02202
function npctask5()
  Hero:ActFun(1046,"22 2",3)
end

function npctask6()
  Hero:ActFun(1046,"22 2",29)
end

--转向选项 02203
function npctask7()
  Hero:ActFun(1046,"22 3",3)
end

function npctask8()
  Hero:ActFun(1046,"22 3",29)
end

--转向选项 02206
function npctask9()
  Hero:ActFun(1046,"22 6",3)
end

function npctask10()
  Hero:ActFun(1046,"22 6",29)
end

--转向选项 02207
function npctask11()
  Hero:ActFun(1046,"22 7",3)
end

function npctask12()
  Hero:ActFun(1046,"22 7",29)
end

--转向选项 02214
function npctask13()
  Hero:ActFun(1046,"22 14",3)
end

function npctask14()
  Hero:ActFun(1046,"22 14",29)
end

--转向选项 02215
function npctask15()
  Hero:ActFun(1046,"22 15",3)
end

function npctask16()
  Hero:ActFun(1046,"22 15",29)
end

--转向选项 02217
function npctask17()
  Hero:ActFun(1046,"22 17",3)
end

function npctask18()
  Hero:ActFun(1046,"22 17",29)
end

--转向选项 02218
function npctask19()
  Hero:ActFun(1046,"22 18",3)
end

function npctask20()
  Hero:ActFun(1046,"22 18",29)
end

--转向选项 02219
function npctask21()
  Hero:ActFun(1046,"22 19",3)
end

function npctask22()
  Hero:ActFun(1046,"22 19",29)
end


--表尾
function npcTail()
  Hero:ActFun(103,"",0)
end 


--显示选项
if(gContext==2150100)then
--显示表头
 npctop1()


  --任务结构链开始
  if(Hero:ActFun(1001,"level >= 60",0) == true)then
  if(Hero:ActFun(1080,"mask == 21",21) == false)then
  if(Hero:ActFun(1080,"task has 0",21) == true)then

    --任务步骤结构开始 02117
    if(Hero:ActFun(1080,"step == 17",21) == true)then
      if(Hero:ActFun(1080,"task state 0",21) == true)then  --接任务选项
        --npcmid021170()
        elseif(Hero:ActFun(1080,"task state 2",21) == true)then
      elseif(Hero:ActFun(1080,"task state 3",21) == true)then  --完成选项
        npcmid021172()
      elseif(Hero:ActFun(1080,"task state 1",21) == true)then  --未完成选项
        --npcmid021171()
      end
    end

  end
  end
end 


  --任务结构链开始
  if(Hero:ActFun(1001,"level >= 65",0) == true)then
  if(Hero:ActFun(1080,"mask == 22",22) == false)then
  if(Hero:ActFun(1080,"task has 0",22) == true)then

    --任务步骤结构开始 02201
    if(Hero:ActFun(1080,"step == 1",22) == true)then
      if(Hero:ActFun(1080,"task state 0",22) == true)then  --接任务选项
        npcmid022010()
        elseif(Hero:ActFun(1080,"task state 2",22) == true)then
      elseif(Hero:ActFun(1080,"task state 3",22) == true)then  --完成选项
        npcmid022012()
      elseif(Hero:ActFun(1080,"task state 1",22) == true)then  --未完成选项
        npcmid022011()
      end
    end

    --任务步骤结构开始 02202
    if(Hero:ActFun(1080,"step == 2",22) == true)then
      if(Hero:ActFun(1080,"task state 0",22) == true)then  --接任务选项
        npcmid022020()
        elseif(Hero:ActFun(1080,"task state 2",22) == true)then
      elseif(Hero:ActFun(1080,"task state 3",22) == true)then  --完成选项
        npcmid022022()
      elseif(Hero:ActFun(1080,"task state 1",22) == true)then  --未完成选项
        npcmid022021()
      end
    end

    --任务步骤结构开始 02203
    if(Hero:ActFun(1080,"step == 3",22) == true)then
      if(Hero:ActFun(1080,"task state 0",22) == true)then  --接任务选项
        npcmid022030()
        elseif(Hero:ActFun(1080,"task state 2",22) == true)then
      elseif(Hero:ActFun(1080,"task state 3",22) == true)then  --完成选项
        --npcmid022032()
      elseif(Hero:ActFun(1080,"task state 1",22) == true)then  --未完成选项
        npcmid022031()
      end
    end

    --任务步骤结构开始 02206
    if(Hero:ActFun(1080,"step == 6",22) == true)then
      if(Hero:ActFun(1080,"task state 0",22) == true)then  --接任务选项
        --npcmid022060()
        elseif(Hero:ActFun(1080,"task state 2",22) == true)then
      elseif(Hero:ActFun(1080,"task state 3",22) == true)then  --完成选项
        npcmid022062()
      elseif(Hero:ActFun(1080,"task state 1",22) == true)then  --未完成选项
        --npcmid022061()
      end
    end

    --任务步骤结构开始 02207
    if(Hero:ActFun(1080,"step == 7",22) == true)then
      if(Hero:ActFun(1080,"task state 0",22) == true)then  --接任务选项
        npcmid022070()
        elseif(Hero:ActFun(1080,"task state 2",22) == true)then
      elseif(Hero:ActFun(1080,"task state 3",22) == true)then  --完成选项
        --npcmid022072()
      elseif(Hero:ActFun(1080,"task state 1",22) == true)then  --未完成选项
        npcmid022071()
      end
    end

    --任务步骤结构开始 02214
    if(Hero:ActFun(1080,"step == 14",22) == true)then
      if(Hero:ActFun(1080,"task state 0",22) == true)then  --接任务选项
        --npcmid022140()
        elseif(Hero:ActFun(1080,"task state 2",22) == true)then
      elseif(Hero:ActFun(1080,"task state 3",22) == true)then  --完成选项
        npcmid022142()
      elseif(Hero:ActFun(1080,"task state 1",22) == true)then  --未完成选项
        --npcmid022141()
      end
    end

    --任务步骤结构开始 02215
    if(Hero:ActFun(1080,"step == 15",22) == true)then
      if(Hero:ActFun(1080,"task state 0",22) == true)then  --接任务选项
        npcmid022150()
        elseif(Hero:ActFun(1080,"task state 2",22) == true)then
      elseif(Hero:ActFun(1080,"task state 3",22) == true)then  --完成选项
        --npcmid022152()
      elseif(Hero:ActFun(1080,"task state 1",22) == true)then  --未完成选项
        npcmid022151()
      end
    end

    --任务步骤结构开始 02217
    if(Hero:ActFun(1080,"step == 17",22) == true)then
      if(Hero:ActFun(1080,"task state 0",22) == true)then  --接任务选项
        --npcmid022170()
        elseif(Hero:ActFun(1080,"task state 2",22) == true)then
      elseif(Hero:ActFun(1080,"task state 3",22) == true)then  --完成选项
        npcmid022172()
      elseif(Hero:ActFun(1080,"task state 1",22) == true)then  --未完成选项
        --npcmid022171()
      end
    end

    --任务步骤结构开始 02218
    if(Hero:ActFun(1080,"step == 18",22) == true)then
      if(Hero:ActFun(1080,"task state 0",22) == true)then  --接任务选项
        npcmid022180()
        elseif(Hero:ActFun(1080,"task state 2",22) == true)then
      elseif(Hero:ActFun(1080,"task state 3",22) == true)then  --完成选项
        npcmid022182()
      elseif(Hero:ActFun(1080,"task state 1",22) == true)then  --未完成选项
        npcmid022181()
      end
    end

    --任务步骤结构开始 02219
    if(Hero:ActFun(1080,"step == 19",22) == true)then
      if(Hero:ActFun(1080,"task state 0",22) == true)then  --接任务选项
        npcmid022190()
        elseif(Hero:ActFun(1080,"task state 2",22) == true)then
      elseif(Hero:ActFun(1080,"task state 3",22) == true)then  --完成选项
        --npcmid022192()
      elseif(Hero:ActFun(1080,"task state 1",22) == true)then  --未完成选项
        npcmid022191()
      end
    end
	else
	npcmid022010()
  end
  end
end
 
 --显示表尾
 npcTail()
elseif(gContext==2150101)then
  npctask1()
elseif(gContext==2150102)then
  npctask2()
elseif(gContext==2150103)then
  npctask3()
elseif(gContext==2150104)then
  npctask4()
elseif(gContext==2150105)then
  npctask5()
elseif(gContext==2150106)then
  npctask6()
elseif(gContext==2150107)then
  npctask7()
elseif(gContext==2150108)then
  npctask8()
elseif(gContext==2150109)then
  npctask9()
elseif(gContext==2150110)then
  npctask10()
elseif(gContext==2150111)then
  npctask11()
elseif(gContext==2150112)then
  npctask12()
elseif(gContext==2150113)then
  npctask13()
elseif(gContext==2150114)then
  npctask14()
elseif(gContext==2150115)then
  npctask15()
elseif(gContext==2150116)then
  npctask16()
elseif(gContext==2150117)then
  npctask17()
elseif(gContext==2150118)then
  npctask18()
elseif(gContext==2150119)then
  npctask19()
elseif(gContext==2150120)then
  npctask20()
elseif(gContext==2150121)then
  npctask21()
elseif(gContext==2150122)then
  npctask22()
end